<!DOCTYPE html>
<html lang="uk">

 <head>
  <title>Game 1</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="game1.css">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&family=Unica+One&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Play&display=swap" rel="stylesheet">
 </head>
 
 <body>

 <div id="top">
    <div id="logo">LingvoLab</div>
    <span id="page">1/49</span>
  </div>

  <div id="middle">
    <div id="greenRectangle">

      <div id="front">
        <img id="audioImage" src="../Images/tools/audio.png"/>
          <span id="word"></span>
        <!--<div id="word">learn</div>-->
<!--        <ul class="news">-->
<!--          <li>Adult</li>-->
<!--          <li>Answer</li>-->
<!--          <li>Ball</li>-->
<!--          <li>Bathroom</li>  -->
<!--          <li>Camera</li>-->
<!--          <li>Chair</li>-->
<!--          <li>Dance</li>-->
<!--          <li>Eat</li>-->
<!--          <li>Enjoy</li>-->
<!--          <li>Face</li>  -->

<!--          <li>Fat</li>-->
<!--          <li>Glass</li>-->
<!--          <li>Grass</li>-->
<!--          <li>Home</li>  -->
<!--          <li>Horse</li>-->
<!--          <li>Interesting</li>-->
<!--          <li>Juice</li>-->
<!--          <li>Kitchen</li>-->
<!--          <li>Know</li>-->
<!--          <li>Language</li>  -->

<!--          <li>Listen</li>-->
<!--          <li>Meet</li>-->
<!--          <li>Museum</li>-->
<!--          <li>Near</li>  -->
<!--          <li>Newspaper</li>-->
<!--          <li>Often</li>-->
<!--          <li>Orange</li>-->
<!--          <li>Page</li>-->
<!--          <li>Pen</li>-->
<!--          <li>Quarter</li>  -->

<!--          <li>Question</li>-->
<!--          <li>Radio</li>-->
<!--          <li>Remember</li>-->
<!--          <li>Sad</li>  -->
<!--          <li>Short</li>-->
<!--          <li>Talk</li>-->
<!--          <li>Tennis</li>-->
<!--          <li>University</li>-->
<!--          <li>Until</li>-->
<!--          <li>Visit</li>  -->

<!--          <li>Village</li>-->
<!--          <li>Waitress</li>-->
<!--          <li>Want</li>-->
<!--          <li>Watch</li>  -->
<!--          <li>Weather</li>-->
<!--          <li>Year</li>-->
<!--          <li>You</li>-->
<!--          <li>Young</li>-->
<!--          <li>Zoo</li> -->
<!--        </ul>-->
        <div id="buttons">
          <div class="next1" id="button1">got it</div>
          <div class="next2" id="button2">study again</div>
        </div>
      </div>
<!--
      <div id="back">
        <div id="translation">bla-bla</div>
      </div>
 -->     
    </div>
  </div>

  <div id="bottom">
    <div><img id="backImage" onclick="document.location='../introPages/main page/main.html'" src="../Images/tools/back.png"/></div>
  </div>

<!--<script src ="game1.js"></script>-->

 <script type="module">
     import User from '../User.js';

     //array with words
     const words = ["adult", "answer", "ball", "bathroom", "camera"];
     //array with sounds
     const sounds = ['../Music/game1/A1/Adult.mp3','../Music/game1/A1/Answer.mp3','../Music/game1/A1/Ball.mp3','../Music/game1/A1/Bathroom.mp3','../Music/game1/A1/Camera.mp3']

     //get name of current user
     const name = localStorage.getItem("last");

     const currentUser = User.build(localStorage.getItem(name));

     //set first world
     firstWord();

     function firstWord(){
         if(currentUser.getProgressGame1()[0].length<1) {
             console.log("after reload" + currentUser);
             currentUser.setProgressGame1(words);
             localStorage.setItem(name,currentUser.toString());
         }
     }



     const progress = currentUser.getProgressGame1();
     document.getElementById("word").textContent = progress[0];
     document.getElementById("page").textContent = ((words.indexOf(document.getElementById("word").textContent.toString())+1) + "/" + words.length).toString();

     localStorage.setItem(name,currentUser.toString());

     //add event listener
     document.getElementById('button1').addEventListener("click",gotIt);
     document.getElementById('button2').addEventListener("click",studyAgain);
     document.getElementById('audioImage').addEventListener("click",sound);

     function gotIt(){
         const index = progress.indexOf(document.getElementById("word").textContent.toString());

         if(index>-1){
             progress.splice(index,1);
         }
         console.log(progress);
         console.log(currentUser);
         document.getElementById("word").textContent = progress[0];
         console.log("got it - " + document.getElementById("word").textContent);
         document.getElementById("page").textContent = ((words.indexOf(document.getElementById("word").textContent.toString())+1) + "/" + words.length).toString();
         currentUser.setProgressGame1(progress);
         localStorage.setItem(name,currentUser.toString());
     }


     function studyAgain(){
         let index = progress.indexOf(document.getElementById("word").textContent.toString());
         if(index<progress.length) {
             document.getElementById("word").textContent = progress[++index];
             document.getElementById("page").textContent = ((words.indexOf(document.getElementById("word").textContent.toString())+1) + "/" + words.length).toString();

         }
     }

     function sound() {
         var audio = new Audio(); // Создаём новый элемент Audio

         const currentWord = document.getElementById("word").textContent.toString();
         const index = words.indexOf(currentWord);
         console.log(words)
         console.log(currentWord);
         console.log(index);

         audio.src = sounds[index]; // Указываем путь к звуку "клика"
         audio.autoplay = true; // Автоматически запускаем
     }

 </script>

 </body>

</html>